---
title: "Embeddings"
description: "使用 text-embedding 系列模型生成语义向量，适用于检索与推荐场景。"
---

> 规范参考：`#/paths/~1v1~1embeddings/post`

`POST /v1/embeddings` 可以将文本或批量文档转化为浮点向量，后续用于 ANN 检索、重排或特征工程。

## 请求示例

<Tabs>
<Tab title="cURL">
  ```bash
  curl -X POST "$ONEHUB_BASE_URL/v1/embeddings" \
    -H "Authorization: Bearer $ONEHUB_TOKEN" \
    -H "Content-Type: application/json" \
    -d '{
      "model": "text-embedding-3-small",
      "input": "吾尝终日而思矣，不如须臾之所学也"
    }'
  ```
</Tab>

<Tab title="Python">
  ```python
  import os
  import requests

  base_url = os.environ.get("ONEHUB_BASE_URL", "https://onehub.example.com")
  token = os.environ["ONEHUB_TOKEN"]

  resp = requests.post(
      f"{base_url}/v1/embeddings",
      headers={"Authorization": f"Bearer {token}"},
      json={
          "model": "text-embedding-3-small",
          "input": "吾尝终日而思矣，不如须臾之所学也",
      },
      timeout=30,
  )
  resp.raise_for_status()
  vector = resp.json()["data"][0]["embedding"]
  print(len(vector), vector[:8])
  ```
</Tab>
</Tabs>

## 使用建议

- `input` 支持字符串或字符串数组，批量输入能减少网络开销；响应的 `data` 数组与输入顺序一一对应。
- `dimensions`（若模型支持）可用于降低维度，便于向量索引存储。
- 避免在输入中包含过长文本，可先通过分段/滑窗方式预处理，再按照业务需求聚合向量。
